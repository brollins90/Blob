@using Before.Infrastructure.Extensions
@model IEnumerable<Blob.Contracts.Models.ViewModels.DeviceCommandVm>
@{
    var deviceId = ((dynamic)ViewData["deviceId"]);
}
<span class="dropdown">
    <a href="#" class="btn btn-default dropdown-toggle" data-toggle="dropdown" title="Issue command"><span class='glyphicon glyphicon-arrow-down'></span> <span class="caret"></span></a>
    <ul class="dropdown-menu" role="menu">
        @if (Model.Any())
        {
            foreach (var cmd in Model)
            {
                <li>
                    @Html.NoEncodeActionLink("<span class='glyphicon glyphicon-arrow-down'></span> " + cmd.ShortName, "Issue Command", "IssueCommand", "Device", routeValues: new { id = deviceId, commandType = cmd.CommandType }, htmlAttributes: new { data_modal = "", @class = "btn btn-default" })
                </li>
            }
        }
        else
        {
            <li><a href="#" class="btn btn-default" title="Issue command"><span class='glyphicon glyphicon-cloud'></span> Commands are only available when the device has an active connection</a></li>
        }
    </ul>
</span>